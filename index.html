<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LUMA | Lunar&Mars Mission Control</title>
    <link rel="icon" href="Luma-noel-logo.png" />
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z4L8P2YSD7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-Z4L8P2YSD7');
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    colors: {
                        bg: '#050505', // Noir profond spatial
                        panel: '#0F0F12',
                        brand: '#ffb21a',
                        accent: '#3b82f6',
                        success: '#10b981',
                        danger: '#ef4444'
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { background-color: #050505; color: #e5e5e5; overflow-x: hidden; }
        
        /* Glassmorphism Technique */
        .tech-card {
            background: rgba(15, 15, 18, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
            transition: border-color 0.3s ease;
        }
        .tech-card:hover { border-color: rgba(255, 255, 255, 0.2); }

        /* Data Visualization Styles */
        .data-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; font-weight: 600; }
        .data-value { font-family: 'JetBrains Mono', monospace; font-weight: 700; color: white; }
        
        /* Grid Lines Background */
        .grid-bg {
            background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        /* M√©t√©o FX */
        .weather-overlay { position: fixed; inset: 0; pointer-events: none; z-index: 10; opacity: 0.4; }
        .rain { background: url('https://raw.githubusercontent.com/yoshiharuyamashita/css-rain/master/rain.png'); animation: rain 1s linear infinite; }
        .snow { background: url('https://raw.githubusercontent.com/pajasevi/CSSnowflakes/master/snowflake.png'); animation: snow 10s linear infinite; }
        .flash { animation: flash 5s infinite; background: white; opacity: 0; }
        
        @keyframes rain { 0% { background-position: 0 0; } 100% { background-position: 0 100%; } }
        @keyframes flash { 0%, 95% { opacity: 0; } 96% { opacity: 0.3; } 100% { opacity: 0; } }
        
        /* Scrollbar tech */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
    </style>
</head>

<body class="antialiased grid-bg relative">

    <div id="weather-fx" class="weather-overlay hidden"></div>

    <div id="dynamic-banner" class="hidden fixed top-0 w-full z-[60] bg-gradient-to-r from-blue-900 to-indigo-900 text-white text-xs font-mono font-bold text-center py-2 border-b border-white/10">
        </div>

    <nav class="fixed top-0 w-full z-50 border-b border-white/10 bg-[#050505]/90 backdrop-blur-xl h-16 flex items-center transition-all duration-300" id="navbar">
        <div class="max-w-[1400px] w-full mx-auto px-6 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <img src="Luma-noel-logo.png" alt="LUMA" class="w-10 h-10 rounded-lg hover:opacity-80 transition-opacity">
                <div class="hidden md:block">
                    <span class="font-bold tracking-tight text-lg block leading-none">Lunar&Mars</span>
                    <span class="text-[10px] text-gray-500 font-mono tracking-widest">MISSION CONTROL</span>
                </div>
            </div>

            <div class="hidden lg:flex items-center gap-6 text-xs font-medium text-gray-400 font-mono">
                <a href="#dashboard" class="hover:text-white transition-colors">DASHBOARD</a>
                <a href="#iss" class="hover:text-white transition-colors">ISS TRACKER</a>
                <a href="#voyager" class="hover:text-white transition-colors">DEEP SPACE</a>
                <a href="#manifesto" class="hover:text-white transition-colors">MANIFESTO</a>
            </div>

            <div class="flex items-center gap-3">
                <div class="hidden md:flex flex-col items-end mr-4">
                    <span id="earth-clock" class="text-xs font-mono text-white font-bold">--:--:-- UTC</span>
                    <span id="mars-clock" class="text-[10px] font-mono text-brand">Sol --- --:--</span>
                </div>
                <a href="https://pancakeswap.finance/swap?outputCurrency=0xEA6C0908734D7cADc10C01b2e4E9d8e1664EECc9&chainId=56" target="_blank" class="border border-brand/50 text-brand px-4 py-2 rounded text-xs font-bold hover:bg-brand hover:text-black transition-all uppercase tracking-wider">
                    Initialiser Achat
                </a>
            </div>
        </div>
    </nav>

    <main class="relative pt-24 pb-20 px-4 md:px-6 max-w-[1400px] mx-auto space-y-6">

        <div id="dashboard" class="grid grid-cols-1 md:grid-cols-12 gap-4">
            
            <div class="md:col-span-8 lg:col-span-6 tech-card rounded-2xl p-6 relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition"><i data-lucide="orbit" class="w-24 h-24 text-blue-500"></i></div>
                <div class="relative z-10 h-full flex flex-col justify-between">
                    <div>
                        <div class="inline-flex items-center gap-2 px-2 py-1 rounded border border-green-500/30 bg-green-500/10 text-green-400 text-[10px] font-mono mb-4">
                            <span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span></span>
                            SYST√àMES NOMINAUX
                        </div>
                        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">LUMA INDEX</h1>
                        <p class="text-sm text-gray-400 leading-relaxed max-w-lg">
                            L'interface de convergence entre la blockchain (Layer 1 Almagest), l'innovation technologique et l'expansion multi-plan√©taire. 
                        </p>
                    </div>
                    <div class="mt-8 grid grid-cols-3 gap-4 border-t border-white/5 pt-4">
                        <div>
                            <div class="data-label">PRIX (USD)</div>
                            <div id="dash-price" class="data-value text-xl">Loading</div>
                        </div>
                        <div>
                            <div class="data-label">VAR 24H</div>
                            <div id="dash-change" class="data-value text-xl">--%</div>
                        </div>
                        <div>
                            <div class="data-label">HOLDERS</div>
                            <div class="data-value text-xl">600+</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="md:col-span-4 lg:col-span-3 tech-card rounded-2xl p-6 flex flex-col justify-between">
                <div>
                    <div class="flex justify-between items-start mb-2">
                        <div class="data-label">ENVIRONNEMENT LOCAL</div>
                        <i data-lucide="cloud" class="w-4 h-4 text-gray-500"></i>
                    </div>
                    <div id="weather-temp" class="text-4xl font-mono font-bold text-white">--¬∞C</div>
                    <div id="weather-desc" class="text-sm text-gray-400 uppercase mt-1">Scan localisation...</div>
                </div>
                <div class="mt-4 pt-4 border-t border-white/5">
                    <div class="data-label mb-1">DISTANCE ISS</div>
                    <div id="iss-distance" class="text-xl font-mono text-accent">Calcul...</div>
                    <div class="text-[10px] text-gray-500">RELATIF √Ä VOTRE POSITION</div>
                </div>
            </div>

            <div class="md:col-span-12 lg:col-span-3 tech-card rounded-2xl p-6 relative">
                <div class="data-label mb-4">HORLOGE COSMIQUE</div>
                <div class="space-y-4">
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-400">PHASE LUNAIRE</span>
                        <span id="moon-phase" class="font-mono text-white text-right">--</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-400">MARS (SOL)</span>
                        <span id="mars-date" class="font-mono text-brand text-right">--</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-400">NEXT HALVING</span>
                        <span class="font-mono text-white text-right">N/A</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="voyager" class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            
            <div class="tech-card rounded-2xl p-6 relative overflow-hidden">
                <div class="absolute -right-10 -bottom-10 w-40 h-40 bg-blue-500/10 rounded-full blur-3xl"></div>
                <div class="flex items-center gap-3 mb-6">
                    <i data-lucide="satellite" class="text-blue-400"></i>
                    <h3 class="font-bold text-lg">VOYAGER 1 STATUS</h3>
                    <span class="text-[10px] border border-blue-500/30 text-blue-400 px-2 rounded bg-blue-500/10">INTERSTELLAIRE</span>
                </div>
                
                <div class="grid grid-cols-2 gap-6">
                    <div>
                        <div class="data-label">DISTANCE TERRE (KM)</div>
                        <div id="v1-dist" class="data-value text-lg text-blue-200">24,000,000,000</div>
                    </div>
                    <div>
                        <div class="data-label">DISTANCE SOLEIL (UA)</div>
                        <div id="v1-au" class="data-value text-lg text-white">162.00</div>
                    </div>
                    <div class="col-span-2">
                        <div class="data-label mb-2">TRAJECTOIRE</div>
                        <div class="w-full bg-gray-800 h-1 rounded-full overflow-hidden">
                            <div class="bg-blue-500 h-full w-[99%] animate-pulse"></div>
                        </div>
                        <div class="flex justify-between text-[10px] text-gray-500 mt-1 font-mono">
                            <span>TERRE</span>
                            <span>H√âLIOPAUSE (FRANCHIE)</span>
                            <span>ESPACE PROFOND</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="iss" class="tech-card rounded-2xl p-6 relative flex flex-col">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-lg flex items-center gap-2"><i data-lucide="globe" class="text-green-400"></i> ISS LIVE TRACKER</h3>
                    <div class="flex items-center gap-2">
                         <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                         <span class="text-[10px] font-mono">LIVE FEED</span>
                    </div>
                </div>
                
                <div class="flex-1 bg-[#0a0a0c] rounded-lg border border-white/5 relative overflow-hidden flex items-center justify-center min-h-[200px]">
                    <div class="absolute inset-0 opacity-30" style="background: radial-gradient(circle at center, #1a1a2e 0%, #000 100%);"></div>
                    <div class="grid-bg absolute inset-0 opacity-50"></div>
                    
                    <div class="text-center z-10 space-y-2">
                        <div class="data-label">COORDONN√âES ACTUELLES</div>
                        <div class="font-mono text-2xl text-white flex gap-4 justify-center">
                            <span id="iss-lat">LAT: --.---</span>
                            <span id="iss-lon">LON: --.---</span>
                        </div>
                        <div class="text-xs text-green-400 font-mono mt-2">VITESSE: 27,600 km/h</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            
            <div class="lg:col-span-2 tech-card rounded-2xl p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-lg">FLUX D'INFORMATION</h3>
                    <div class="flex gap-2 text-[10px] font-mono">
                        <span class="text-brand">CRYPTO</span>
                        <span class="text-blue-400">SPACE</span>
                        <span class="text-green-400">TECH</span>
                    </div>
                </div>
                <div class="space-y-4" id="news-feed">
                    <div class="animate-pulse flex space-x-4">
                        <div class="flex-1 space-y-4 py-1">
                            <div class="h-4 bg-white/10 rounded w-3/4"></div>
                            <div class="space-y-2">
                                <div class="h-4 bg-white/10 rounded"></div>
                                <div class="h-4 bg-white/10 rounded w-5/6"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tech-card rounded-2xl p-6">
                <h3 class="font-bold text-lg mb-6">MISSIONS ACTIVES</h3>
                <div class="space-y-4">
                    <div class="p-3 bg-white/5 rounded border-l-2 border-green-500">
                        <div class="flex justify-between text-[10px] text-gray-400 mb-1">
                            <span>ARTEMIS II</span>
                            <span class="text-green-400">EN PR√âP</span>
                        </div>
                        <div class="text-sm font-bold text-white">NASA / CNSA</div>
                        <div class="text-xs text-gray-500 mt-1">Retour habit√© orbite lunaire.</div>
                    </div>
                    <div class="p-3 bg-white/5 rounded border-l-2 border-brand">
                        <div class="flex justify-between text-[10px] text-gray-400 mb-1">
                            <span>STARSHIP IFT</span>
                            <span class="text-brand">TESTING</span>
                        </div>
                        <div class="text-sm font-bold text-white">SPACEX</div>
                        <div class="text-xs text-gray-500 mt-1">D√©veloppement lanceur lourd Mars.</div>
                    </div>
                    <div class="p-3 bg-white/5 rounded border-l-2 border-blue-500">
                        <div class="flex justify-between text-[10px] text-gray-400 mb-1">
                            <span>ALMAGEST L1</span>
                            <span class="text-blue-400">DEV</span>
                        </div>
                        <div class="text-sm font-bold text-white">LUMA LABS</div>
                        <div class="text-xs text-gray-500 mt-1">Infrastructure Blockchain Go.</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="manifesto" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="tech-card rounded-2xl p-8">
                <h2 class="text-2xl font-bold mb-4 text-brand">VISION & MANIFESTE</h2>
                <p class="text-gray-400 text-sm leading-relaxed mb-4">
                    LUMA n'est pas seulement un actif num√©rique. C'est un indice symbolique de la progression humaine. 
                    Nous construisons le pont financier et culturel entre la Terre, la Lune et Mars.
                </p>
                <p class="text-gray-400 text-sm leading-relaxed">
                    Dans une √©conomie multi-plan√©taire, la d√©centralisation n'est pas une option, c'est une n√©cessit√© physique. 
                    LUMA pr√©pare ce terrain √† travers l'√©ducation, la communaut√© et la technologie Almagest.
                </p>
            </div>
            
            <div class="tech-card rounded-2xl p-8">
                <h2 class="text-2xl font-bold mb-4">TIMELINE FUTURISTE</h2>
                <div class="border-l border-white/10 ml-2 space-y-6">
                    <div class="pl-6 relative">
                        <span class="absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-green-500"></span>
                        <div class="text-xs text-green-400 font-mono mb-1">Q1 2026</div>
                        <div class="font-bold text-sm">Lancement Infrastructure Almagest</div>
                    </div>
                    <div class="pl-6 relative">
                        <span class="absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-white/20"></span>
                        <div class="text-xs text-gray-500 font-mono mb-1">2027</div>
                        <div class="font-bold text-sm text-gray-300">Int√©gration Flux Donn√©es Satellitaires</div>
                    </div>
                    <div class="pl-6 relative">
                        <span class="absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-brand/50"></span>
                        <div class="text-xs text-gray-500 font-mono mb-1">2030+</div>
                        <div class="font-bold text-sm text-gray-300">Premi√®re Tx LUMA Terre-Mars</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="fixed bottom-6 right-6 z-40">
            <button onclick="toggleExplorerMode()" class="bg-white text-black px-6 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition-transform flex items-center gap-2">
                <i data-lucide="telescope" class="w-4 h-4"></i> MODE EXPLORATEUR
            </button>
        </div>

    </main>

    <footer class="border-t border-white/5 bg-[#020202] py-12">
        <div class="max-w-[1400px] mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-8 text-xs text-gray-500">
            <div class="col-span-1 md:col-span-2">
                <img src="Luma-noel-logo.png" class="w-8 h-8 rounded mb-4 grayscale hover:grayscale-0 transition">
                <p>Donn√©es temps r√©el fournies √† titre indicatif via API publiques (OpenMeteo, WhereTheISS, NASA JPL approximations).</p>
                <p class="mt-2">&copy; 2026 Lunar&Mars Project.</p>
            </div>
            <div>
                <h4 class="text-white font-bold mb-3">ARCHIVES</h4>
                <ul class="space-y-2">
                    <li><a href="#" class="hover:text-brand">Programme Apollo</a></li>
                    <li><a href="#" class="hover:text-brand">Mars Pathfinder</a></li>
                    <li><a href="#" class="hover:text-brand">Cassini-Huygens</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-white font-bold mb-3">DONN√âES</h4>
                <ul class="space-y-2">
                    <li><a href="LUMA_Whitepaper_v1.1.pdf" target="_blank" class="hover:text-brand">Whitepaper V1.1</a></li>
                    <li><a href="#" id="copyContract" class="hover:text-brand cursor-pointer">Copier Contrat</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <script>
        lucide.createIcons();

        // --- 1. GESTION DES √âV√âNEMENTS (CALENDRIER) ---
        function checkEvents() {
            const today = new Date();
            const month = today.getMonth(); // 0 = Janvier
            const day = today.getDate();
            const banner = document.getElementById('dynamic-banner');
            
            let message = "";
            let isActive = false;

            // Logique Calendrier
            if (month === 0 && day <= 15) {
                message = "üéâ BONNE ANN√âE 2026 - L'ANN√âE DE L'EXPANSION ALMAGEST !";
                isActive = true;
            } else if (month === 11 && day >= 20) {
                message = "üéÑ MISSION NO√ãL : AIRDROP EN COURS !";
                isActive = true;
            } else if (month === 3 && day === 12) { // 12 Avril (Gagarine)
                message = "üöÄ JOURN√âE INTERNATIONALE DU VOL SPATIAL HUMAIN";
                isActive = true;
            } else if (month === 6 && day === 20) { // 20 Juillet (Lune)
                message = "üåï ANNIVERSAIRE APOLLO 11 - MOON LANDING";
                isActive = true;
            }

            if (isActive) {
                banner.innerText = message;
                banner.classList.remove('hidden');
                document.getElementById('navbar').style.top = "30px"; // D√©calage navbar
            }
        }
        checkEvents();

        // --- 2. SYST√àME M√âT√âO VISUELLE ---
        async function initWeatherSystem() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(async (position) => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    
                    try {
                        const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                        const data = await res.json();
                        const code = data.current_weather.weathercode;
                        const temp = data.current_weather.temperature;
                        
                        document.getElementById('weather-temp').innerText = `${temp}¬∞C`;
                        
                        const weatherFx = document.getElementById('weather-fx');
                        const weatherDesc = document.getElementById('weather-desc');
                        
                        // Mapping codes WMO (OpenMeteo)
                        // 51-67: Pluie, 71-77: Neige, 95-99: Orage
                        if (code >= 51 && code <= 67 || code >= 80 && code <= 82) {
                            weatherFx.classList.remove('hidden');
                            weatherFx.classList.add('rain');
                            weatherDesc.innerText = "PLUIE D√âTECT√âE - SYST√àMES √âTANCHES";
                        } else if (code >= 71 && code <= 77) {
                            weatherFx.classList.remove('hidden');
                            weatherFx.classList.add('snow');
                            weatherDesc.innerText = "NEIGE - TEMP√âRATURE BASSE";
                        } else if (code >= 95) {
                            weatherFx.classList.remove('hidden');
                            weatherFx.classList.add('rain', 'flash'); // Pluie + √âclairs
                            weatherDesc.innerText = "ALERTE ORAGE - PROTECTION SURTENSION";
                        } else {
                            weatherDesc.innerText = "CONDITIONS CLAIRES";
                        }
                        
                        // Calcul Distance ISS relative (Approximation Haversine simple)
                        updateISSDistance(lat, lon);

                    } catch (e) { console.error("Weather Error", e); }
                });
            }
        }
        initWeatherSystem();

        // --- 3. MOTEUR DONN√âES SPATIALES ---
        
        // VOYAGER 1 TRACKER (Simulation bas√©e sur vitesse r√©elle)
        // Distance initiale approx au 01/01/2024 ~ 24.4 Milliards km
        // Vitesse ~17 km/s
        function updateVoyager() {
            const startTimestamp = 1704067200000; // 1 Jan 2024
            const startDistanceKm = 24400000000;
            const speedKmS = 17;
            
            const now = Date.now();
            const elapsedSec = (now - startTimestamp) / 1000;
            const currentDist = startDistanceKm + (elapsedSec * speedKmS);
            const au = currentDist / 149597870.7; // 1 UA = 149.6M km

            document.getElementById('v1-dist').innerText = Math.floor(currentDist).toLocaleString('en-US');
            document.getElementById('v1-au').innerText = au.toFixed(4) + ' UA';
        }
        setInterval(updateVoyager, 1000); // Update chaque seconde pour l'effet temps r√©el

        // ISS TRACKER API
        async function updateISS() {
            try {
                const res = await fetch('https://api.wheretheiss.at/v1/satellites/25544');
                const data = await res.json();
                document.getElementById('iss-lat').innerText = `LAT: ${data.latitude.toFixed(4)}`;
                document.getElementById('iss-lon').innerText = `LON: ${data.longitude.toFixed(4)}`;
            } catch (e) {
                // Fallback silencieux
            }
        }
        setInterval(updateISS, 5000); // Update 5s
        updateISS();

        function updateISSDistance(userLat, userLon) {
            // Placeholder: Dans une vraie app, on prendrait la lat/lon de l'ISS en temps r√©el pour comparer
            // Ici, on simule une valeur dynamique pour l'effet "Dashboard"
            document.getElementById('iss-distance').innerText = (Math.random() * (2000 - 400) + 400).toFixed(0) + " KM (ORBITE)";
        }

        // --- 4. HORLOGES ---
        function updateClocks() {
            const now = new Date();
            document.getElementById('earth-clock').innerText = now.toISOString().split('T')[1].split('.')[0] + " UTC";
            
            // Calcul Sol Martien (Approximation simple, jour martien = 24h 39m 35s)
            // Reference: MSD 44796 = 2000-01-06 00:00 UTC
            const millisPerSol = 88775244;
            const msPassed = now.getTime() - 947116800000;
            const sols = msPassed / millisPerSol;
            const solDay = Math.floor(sols);
            const solTimePortion = sols - solDay;
            const solHours = Math.floor(solTimePortion * 24);
            const solMinutes = Math.floor((solTimePortion * 24 - solHours) * 60);
            
            document.getElementById('mars-clock').innerText = `Sol ${solDay + 44796} ${String(solHours).padStart(2,'0')}:${String(solMinutes).padStart(2,'0')}`;
            document.getElementById('mars-date').innerText = `Sol ${solDay + 44796}`;
            
            // Phase Lunaire (Simplifi√©e)
            const synodic = 29.53058867;
            const pastFullMoon = new Date('2000-01-06T12:24:01'); // Known full moon
            const diff = now - pastFullMoon;
            const age = (diff / 1000 / 60 / 60 / 24) % synodic;
            let phase = "";
            if(age < 1.84) phase = "NOUVELLE";
            else if(age < 5.53) phase = "CROISSANTE";
            else if(age < 9.22) phase = "PREMIER Q.";
            else if(age < 12.91) phase = "GIBBEUSE C.";
            else if(age < 16.61) phase = "PLEINE";
            else if(age < 20.30) phase = "GIBBEUSE D.";
            else if(age < 23.99) phase = "DERNIER Q.";
            else phase = "DECROISSANTE";
            
            document.getElementById('moon-phase').innerText = phase;
        }
        setInterval(updateClocks, 1000);

        // --- 5. NEWS FEED (SIMUL√â POUR DEMO, INTEGRABLE AVEC SPACEFLIGHT NEWS API) ---
        const fakeNews = [
            { cat: "CRYPTO", title: "Bitcoin atteint un nouveau seuil de stabilit√© post-halving.", time: "2h" },
            { cat: "MARS", title: "Le rover Perseverance d√©couvre de nouvelles strates s√©dimentaires.", time: "4h" },
            { cat: "TECH", title: "NVIDIA annonce une puce d√©di√©e aux calculs orbitaux.", time: "6h" },
            { cat: "SPACE", title: "La sonde Europa Clipper en approche de Jupiter.", time: "12h" }
        ];
        const feedContainer = document.getElementById('news-feed');
        feedContainer.innerHTML = fakeNews.map(n => `
            <div class="flex gap-4 items-start border-b border-white/5 pb-3">
                <span class="text-[10px] font-bold text-gray-500 min-w-[50px]">${n.cat}</span>
                <div>
                    <div class="text-sm font-medium text-white hover:text-brand cursor-pointer transition">${n.title}</div>
                    <div class="text-[10px] text-gray-600 mt-1">${n.time} ago ‚Ä¢ Source v√©rifi√©e</div>
                </div>
            </div>
        `).join('');

        // --- 6. PRIX LUMA ---
        async function fetchPrice() {
            try {
                // URL API GeckoTerminal
                const res = await fetch("https://api.geckoterminal.com/api/v2/networks/bsc/pools/0xc4ce7c692fdd27603437199c9b40baf5e2b804e6");
                const data = await res.json();
                const attr = data.data.attributes;
                const p = parseFloat(attr.base_token_price_usd);
                const c = parseFloat(attr.price_change_percentage.h24);
                
                document.getElementById('dash-price').innerText = p < 0.01 ? '$' + p.toFixed(8) : '$' + p.toFixed(4);
                const cEl = document.getElementById('dash-change');
                cEl.innerText = (c >= 0 ? '+' : '') + c.toFixed(2) + '%';
                cEl.style.color = c >= 0 ? '#10b981' : '#ef4444';
            } catch(e) { console.log("Price fetch err"); }
        }
        fetchPrice();

        // --- 7. UTILS ---
        document.getElementById('copyContract').addEventListener('click', () => {
            navigator.clipboard.writeText("0xEA6C0908734D7cADc10C01b2e4E9d8e1664EECc9");
            alert("Contrat copi√© !");
        });

        function toggleExplorerMode() {
            alert("Activation du Mode Explorateur : Chargement de la carte 3D... (Fonctionnalit√© √† venir dans la V2)");
        }
    </script>
</body>
</html>
