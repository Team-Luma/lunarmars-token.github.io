<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title id="page-title" data-en="LUMA Tracker - Lunar&Mars Live Data" data-fr="LUMA Tracker - Donn√©es en Direct Lunar&Mars">LUMA Tracker - Donn√©es en Direct Lunar&Mars</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="Luma-noel-logo.png" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet" />
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z4L8P2YSD7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-Z4L8P2YSD7');
    </script>

    <style>
        /* BASE & THEME inspired by major crypto trackers */
        :root {
            --color-primary: #ffb21a; /* Orange/Yellow */
            --color-success: #2ecc71; /* Green */
            --color-danger: #e74c3c; /* Red */
            --color-bg-main: #0c0d1b;
            --color-card-bg: #191b34;
            --color-border: rgba(255, 255, 255, 0.1);
        }

        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: "Inter", sans-serif;
            background: var(--color-bg-main);
            color:#fff;
            min-height: 100vh;
        }
        a { color:var(--color-primary); text-decoration:none; transition: color 0.2s; }
        a:hover { color: rgba(255, 178, 26, 0.7); }

        /* General Layout */
        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }

        /* -------- 1. HEADER (Navigation & Global Stats Bar) -------- */
        header { 
            background: rgba(12, 13, 27, 0.95); 
            backdrop-filter: blur(10px); 
            border-bottom: 1px solid var(--color-border);
            padding: 10px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .header-content { display: flex; align-items: center; justify-content: space-between; gap: 20px; }
        .brand { display: flex; align-items: center; gap: 10px; }
        .brand-logo img { width: 36px; height: 36px; border-radius: 8px; }
        .brand-name { font-size: 20px; font-weight: 800; letter-spacing: 0.05em; }

        .nav { display:flex; gap:16px; font-size:12px; text-transform:uppercase; font-weight: 600; }
        .nav a { padding:4px 8px; border-bottom: 2px solid transparent; opacity:0.85; transition: all 0.2s; }
        .nav a:hover { border-color: var(--color-primary); opacity: 1; }
        
        .lang-switch button { background: var(--color-card-bg); color: #fff; border: 1px solid var(--color-border); padding: 4px 10px; border-radius: 6px; cursor:pointer; font-size:11px; transition: all 0.2s; }
        .lang-switch button.active { background:var(--color-primary); color:#1b1302; border-color: var(--color-primary); }

        /* -------- 2. MAIN TRACKER SECTION -------- */
        .tracker-section { padding: 40px 0 80px; }
        .token-header { 
            display: flex; 
            align-items: center; 
            margin-bottom: 25px; 
            gap: 15px;
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 15px;
        }
        .token-header h1 { font-size: 2.2rem; font-weight: 800; }
        .token-header .symbol { 
            background: var(--color-card-bg); 
            padding: 4px 8px; 
            border-radius: 6px; 
            font-size: 1.2rem; 
            font-weight: 700; 
            color: var(--color-primary);
        }

        .price-overview {
            display: flex;
            align-items: flex-end;
            margin-bottom: 30px;
        }
        .price-box { margin-right: 25px; }
        .price-label { font-size: 0.9rem; color: rgba(255,255,255,0.6); margin-bottom: 5px; }
        .price-main { font-size: 3.5rem; font-weight: 900; font-family: 'JetBrains Mono', monospace; line-height: 1; }
        
        .price-change {
            font-size: 1.2rem; 
            padding: 6px 12px; 
            border-radius: 8px;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
        }
        .price-change.up { background: rgba(46, 204, 113, 0.2); color: var(--color-success); }
        .price-change.down { background: rgba(231, 76, 60, 0.2); color: var(--color-danger); }
        
        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .metric-card {
            background: var(--color-card-bg);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--color-border);
        }
        .metric-label { font-size: 12px; text-transform: uppercase; color: rgba(255,255,255,0.5); margin-bottom: 5px; }
        .metric-value { font-size: 1.2rem; font-weight: 700; font-family: 'JetBrains Mono', monospace; }

        /* Trading & Links Section */
        .trade-links-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }
        
        .trading-card {
            padding: 25px;
            background: var(--color-card-bg);
            border-radius: 12px;
        }
        .trading-title { font-size: 1.4rem; font-weight: 700; margin-bottom: 15px; color: var(--color-primary); }
        .trade-btn-group { display: flex; gap: 15px; }
        .trade-btn-group a {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 700;
            font-size: 0.95rem;
            transition: transform 0.1s;
        }
        .btn-buy { background: var(--color-success); color: #000; }
        .btn-dex { background: #3498db; color: #fff; }
        .btn-chart { background: #555; color: #fff; }
        
        .contract-info { margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px dashed var(--color-border); }
        .contract-info p { font-size: 11px; color: rgba(255,255,255,0.7); }
        .contract-address { 
            font-family: 'JetBrains Mono', monospace; 
            font-size: 12px; 
            margin-top: 5px;
            word-break: break-all;
            color: var(--color-primary);
        }
        
        /* Security & Locks Card (Side Info) */
        .security-card {
            padding: 25px;
            background: var(--color-card-bg);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .security-card h3 { font-size: 1.4rem; font-weight: 700; margin-bottom: 15px; color: var(--color-danger); }
        .security-item { border-bottom: 1px dotted var(--color-border); padding: 10px 0; font-size: 13px; }
        .security-item:last-child { border-bottom: none; }
        .security-item strong { color: var(--color-success); }
        .security-item .danger { color: var(--color-danger); }
        .security-item a { font-size: 11px; margin-left: 5px; }
        
        /* Footer */
        footer { padding: 20px 0; border-top: 1px solid var(--color-border); margin-top: 50px; text-align: center; font-size: 12px; color: rgba(255,255,255,0.6); }

        @media (max-width: 900px) {
            .trade-links-grid { grid-template-columns: 1fr; }
            .token-header h1 { font-size: 1.8rem; }
            .price-main { font-size: 2.5rem; }
            .price-change { font-size: 1rem; }
            .price-overview { flex-direction: column; align-items: flex-start; }
            .price-box { margin-right: 0; margin-bottom: 15px; }
            .trade-btn-group { flex-direction: column; }
        }

        /* CHRISTMAS BANNER (Kept for fidelity to original) */
        .christmas-banner {
            background: linear-gradient(90deg, #b30000, #008000);
            color: #fff;
            text-align: center;
            padding: 8px 15px;
            font-weight: 600;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }
    </style>
</head>

<body data-lang="fr">

    <header>
        <div class="container header-content">
            <div class="brand">
                <div class="brand-logo"><img src="Luma-noel-logo.png" alt="LUMA logo" /></div>
                <div class="brand-name">LUMA Tracker</div>
            </div>
            
            <nav class="nav">
                <a href="#overview">Aper√ßu</a>
                <a href="#tokenomics">S√©curit√©</a>
                <a href="https://t.me/LunarMarsOfficial" target="_blank">Communaut√©</a>
                <a href="LUMA_Whitepaper_v1.pdf" target="_blank">Whitepaper</a>
            </nav>
            
            <div class="lang-switch">
                <button id="lang-en" onclick="setLanguage('en')">EN</button>
                <button id="lang-fr" onclick="setLanguage('fr')" class="active">FR</button>
            </div>
        </div>
    </header>
    
    <div class="christmas-banner">
        üéÖ‚ú® LUMA Christmas Airdrop ‚Äì Santa is flying to every Lumian & Lumienne wallet! üéÑüöÄ
    </div>

    <main class="container tracker-section">
        
        <div class="token-header" id="overview">
            <h1>Lunar&Mars</h1>
            <span class="symbol">LUMA</span>
        </div>
        
        <div class="price-overview">
            <div class="price-box">
                <div class="price-label">Prix LUMA (USD)</div>
                <div id="luma-price" class="price-main">$0.000000000</div>
            </div>
            <div id="luma-change" class="price-change">0.00% (24h)</div>
        </div>
        
        <div class="metrics-grid">
            
            <div class="metric-card">
                <div class="metric-label">Market Cap</div>
                <div id="stat-mcap" class="metric-value">‚Äî</div>
            </div>

            <div class="metric-card">
                <div class="metric-label">Holders Actifs</div>
                <div id="stat-holders" class="metric-value">...</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-label">Total Supply (Circulante)</div>
                <div id="stat-supply" class="metric-value">...</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-label">Volume (24h)</div>
                <div class="metric-value">Info √† venir</div>
            </div>
            
        </div>
        
        <div class="trade-links-grid">
            
            <div class="trading-card">
                <div class="trading-title">Acheter & Trader LUMA</div>
                <div class="trade-btn-group">
                    <a href="https://pancakeswap.finance/swap?outputCurrency=0xEA6C0908734D7cADc10C01b2e4E9d8e1664EECc9&chainId=56" target="_blank" class="trade-btn-group a btn-buy">
                        Acheter sur PancakeSwap
                    </a>
                    <a href="https://www.mexc.com/dex/trade?pair_ca=0xc4ce7c692fdd27603437199c9b40baf5e2b804e6&chain_id=56&token_ca=0xea6c0908734d7cadc10c01b2e4e9d8e1664eecc9&inviteCode=1489J" target="_blank" class="trade-btn-group a btn-dex">
                        Trader sur MEXC DEX
                    </a>
                </div>
                
                <a href="https://www.geckoterminal.com/bsc/pools/0xc4ce7c692fdd27603437199c9b40baf5e2b804e6" target="_blank" style="display: block; margin-top: 15px;" class="trade-btn-group a btn-chart">
                    Voir le Graphique en Direct
                </a>

                <div class="contract-info">
                    <p>R√©seau : BNB Smart Chain</p>
                    <p>Contrat : <span class="contract-address">0xEA6C0908734D7cADc10C01b2e4E9d8e1664EECc9</span></p>
                    <p style="margin-top: 8px;">Taxes : Achat/Vente : 0% / 0%</p>
                </div>
            </div>
            
            <div class="security-card" id="tokenomics">
                <h3>S√©curit√© & Verrrouillages</h3>
                
                <div class="security-item">
                    **Contrat Immuable**
                    <span class="danger">(Ownership Renonc√©)</span>
                    <a href="https://bscscan.com/tx/0xfdbae1139fdbbba8c5ffe63c4b7b90cee096fc0147ae27ef035fa2c68970e772" target="_blank">[Tx]</a>
                </div>
                
                <div class="security-item">
                    **Liquidit√© Verrouill√©e**
                    <strong style="color: var(--color-success);">(LP Lock√© 1 an)</strong>
                    <a href="https://www.pinksale.finance/pinklock/bsc/record/1408517" target="_blank">[Voir]</a>
                </div>
                
                <div class="security-item">
                    **Supply Verrouill√©e (1/3)**
                    <strong>Record: 1389151</strong>
                    <a href="https://www.pinksale.finance/pinklock/bsc/record/1389151" target="_blank">[Voir]</a>
                </div>
                
                <div class="security-item">
                    **Supply Verrouill√©e (2/3)**
                    <strong>Record: 1391827</strong>
                    <a href="https://www.pinksale.finance/pinklock/bsc/record/1391827" target="_blank">[Voir]</a>
                </div>
                
                <div class="security-item">
                    **Burn Initial**
                    <span class="danger">(22M LUMA Br√ªl√©s)</span>
                    <a href="https://bscscan.com/tx/0x4b8a548ebe8a599c66b59915d7413549a601ae5c2e6c5e7c0c0baf9214f15a17" target="_blank">[Tx]</a>
                </div>
            </div>
        </div>
    </main>

    <footer>
        LUMA est un jeton communautaire symbolique sur BNB Smart Chain. Rien ici n'est un conseil financier ou d'investissement. Suivez-nous sur X : <a href="https://x.com/LunarMarsToken" target="_blank">@LunarMarsToken</a>.
    </footer>

    <script>
        const CONTRACT_ADDRESS = '0xEA6C0908734D7cADc10C01b2e4E9d8e1664EECc9';
        const BSCSCAN_API_KEY¬† = 'SWCM6WAEYSX4YJS3SZP6EFXKQPM74K6N1Y'; 

        let lumaPriceUsd = null;
        let lumaSupply¬† ¬†= null;

        /* --- LOGIQUE DE TRADUCTION (Simplifi√©e pour le fork) --- */
        function setLanguage(lang) {
            // Logique de traduction non essentielle pour la d√©mo du fork de tracker,
            // mais conserv√©e pour basculer la classe 'active' sur les boutons EN/FR.
            document.body.setAttribute('data-lang', lang);
            document.getElementById('lang-en').classList.remove('active');
            document.getElementById('lang-fr').classList.remove('active');
            document.getElementById('lang-' + lang).classList.add('active');
            // Remarque: La traduction compl√®te des textes devrait √™tre r√©impl√©ment√©e ici si n√©cessaire.
        }
        setLanguage('fr');

        /* --- PRIX LUMA & MARKET DATA (GeckoTerminal) --- */
        function formatCryptoPrice(price) {
            if (!isFinite(price) || price <= 0) return "Non disponible";
            if (price >= 0.01) { return "$" + price.toFixed(4); }
            if (price < 0.01 && price > 0) {
                let s = price.toFixed(10);
                s = s.replace(/0+$/,"").replace(/\.$/,"");
                return "$" + s;
            }
            return "$" + price.toExponential(4);
        }
        
        function updateMarketCap() {
            const mcapEl = document.getElementById('stat-mcap');
            if (!mcapEl) return;
            if (lumaPriceUsd && lumaSupply) {
                const mcap = lumaPriceUsd * lumaSupply;
                mcapEl.textContent = "$" + mcap.toLocaleString("fr-FR", { maximumFractionDigits: 0 });
            } else {
                mcapEl.textContent = "Calcul en cours...";
            }
        }

        async function loadLumaPrice() {
            const url = "https://api.geckoterminal.com/api/v2/networks/bsc/pools/0xc4ce7c692fdd27603437199c9b40baf5e2b804e6";
            const priceEl¬† = document.getElementById("luma-price");
            const changeEl = document.getElementById("luma-change");
            try {
                const res¬† = await fetch(url);
                const data = await res.json();
                const attr = data?.data?.attributes;
                if (!attr) { return; }
                
                // Note: GeckoTerminal's price and 24h change are generally more reliable for DEX pools.
                const price = Number(attr.base_token_price_usd ?? attr.quote_token_price_usd ?? attr.price_usd ?? 0);
                const change = Number((attr.price_change_percentage && attr.price_change_percentage.h24) ?? attr.price_change_percentage_24h ?? 0);

                lumaPriceUsd = price;

                if (priceEl) {
                    priceEl.textContent = formatCryptoPrice(price);
                }
                if (changeEl) {
                    const isUp = change >= 0;
                    changeEl.classList.toggle("down", !isUp);
                    changeEl.classList.toggle("up", isUp);
                    const sign = isUp ? "‚ñ≤ " : "‚ñº ";
                    changeEl.textContent = `${sign}${Math.abs(change).toFixed(2)}% (24h)`;
                }

                updateMarketCap();

            } catch (e) { 
                console.error("LUMA price error:", e); 
                if (priceEl.textContent === "$0.000000000") priceEl.textContent = "Erreur API";
            }
        }
        
        /* --- HOLDERS & SUPPLY (BscScan) --- */
        async function loadLumaOnchainStats() {
            const holdersEl = document.getElementById('stat-holders');
            const supplyEl¬† = document.getElementById('stat-supply');

            try {
                const holdersUrl = `https://api.bscscan.com/api?module=token&action=tokenholdercount&contractaddress=${CONTRACT_ADDRESS}&apikey=${BSCSCAN_API_KEY}`;
                const supplyUrl¬† = `https://api.bscscan.com/api?module=stats&action=tokensupply&contractaddress=${CONTRACT_ADDRESS}&apikey=${BSCSCAN_API_KEY}`;

                const [holdersRes, supplyRes] = await Promise.all([
                    fetch(holdersUrl),
                    fetch(supplyUrl)
                ]);

                const holdersData = await holdersRes.json();
                const supplyData¬† = await supplyRes.json();

                if (holdersData.status === "1" && holdersEl) {
                    const count = Number(holdersData.result);
                    holdersEl.textContent = count.toLocaleString("fr-FR");
                }

                if (supplyData.status === "1" && supplyEl) {
                    const raw = Number(supplyData.result); // 18 d√©cimales
                    const supply = raw / 1e18;
                    lumaSupply = supply;
                    // Affichage des milliards/millions pour plus de clart√©
                    supplyEl.textContent = supply.toLocaleString("fr-FR", { maximumFractionDigits: 0 }) + " LUMA";
                    updateMarketCap();
                }

            } catch (e) {
                console.error("LUMA stats error:", e);
                if (holdersEl.textContent === "...") holdersEl.textContent = "Erreur";
                if (supplyEl.textContent === "...") supplyEl.textContent = "Erreur";
            }
        }
        
        // Initialisation et intervales
        loadLumaPrice();
        loadLumaOnchainStats();
        
        setInterval(loadLumaPrice, 60000); // 1 minute pour le prix
        setInterval(loadLumaOnchainStats, 300000); // 5 minutes pour BscScan
    </script>
</body>
</html>
