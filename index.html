<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LUMA | Lunar&Mars Mission Control</title>
    <link rel="icon" href="Luma-logo.png" />
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z4L8P2YSD7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-Z4L8P2YSD7');
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    colors: {
                        bg: '#050505',
                        panel: '#0F0F12',
                        brand: '#ffb21a',
                        accent: '#3b82f6',
                        webb: '#d4a017', // Or pour James Webb
                        quantum: '#8b5cf6', // Violet pour Quantique
                        danger: '#ef4444'
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'scroll-ticker': 'scroll 40s linear infinite',
                        'spin-slow': 'spin 12s linear infinite',
                    },
                    keyframes: {
                        scroll: { '0%': { transform: 'translateX(0)' }, '100%': { transform: 'translateX(-100%)' } }
                    }
                }
            }
        }
    </script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { background-color: #050505; color: #e5e5e5; overflow-x: hidden; }
        
        .tech-card {
            background: rgba(15, 15, 18, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
            transition: border-color 0.3s ease, transform 0.3s ease;
        }
        .tech-card:hover { border-color: rgba(255, 255, 255, 0.2); transform: translateY(-2px); }

        .data-label { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; font-weight: 600; margin-bottom: 0.25rem; }
        .data-value { font-family: 'JetBrains Mono', monospace; font-weight: 700; color: white; }
        
        .grid-bg {
            background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        #weather-overlay { position: fixed; inset: 0; pointer-events: none; z-index: 40; overflow: hidden; }
        
        /* Language Switcher */
        .lang-btn { cursor: pointer; opacity: 0.5; transition: opacity 0.3s; font-weight: bold; }
        .lang-btn.active { opacity: 1; color: #ffb21a; }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
    </style>
</head>

<body class="antialiased grid-bg relative">

    <div id="weather-overlay"></div>

    <div id="festival-bar" class="hidden fixed top-0 w-full z-[70] bg-gradient-to-r from-indigo-900 via-purple-900 to-indigo-900 border-b border-white/20 text-white text-xs font-semibold text-center py-2 shadow-lg">
        <span id="festival-text"></span>
    </div>

    <nav id="mainNav" class="fixed top-0 w-full z-50 border-b border-white/10 bg-[#050505]/90 backdrop-blur-xl h-16 flex items-center transition-all duration-300">
        <div class="max-w-[1400px] w-full mx-auto px-4 md:px-6 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <img src="Luma-logo.png" alt="LUMA" class="w-10 h-10 rounded-lg shadow-lg hover:scale-105 transition-transform">
                <div class="hidden md:block">
                    <span class="font-bold tracking-tight text-lg block leading-none text-white">Lunar&Mars</span>
                    <span class="text-[10px] text-brand font-mono tracking-widest">MISSION CONTROL</span>
                </div>
            </div>

            <div class="hidden lg:flex items-center gap-6 text-xs font-medium text-gray-400 font-mono">
                <a href="#dashboard" class="hover:text-white transition-colors" data-i18n="nav_dash">DASHBOARD</a>
                <a href="#science-section" class="hover:text-white transition-colors text-webb" data-i18n="nav_science">SCIENCE & WEBB</a>
                <a href="#iss-section" class="hover:text-white transition-colors" data-i18n="nav_iss">TRACKING</a>
                <a href="#manifesto" class="hover:text-white transition-colors" data-i18n="nav_manifesto">MANIFESTO</a>
            </div>

            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2 text-xs font-mono border-r border-white/10 pr-4">
                    <span class="lang-btn active" onclick="changeLanguage('fr')" id="btn-fr">FR</span>
                    <span class="text-gray-600">/</span>
                    <span class="lang-btn" onclick="changeLanguage('en')" id="btn-en">EN</span>
                </div>
                <a href="https://pancakeswap.finance/swap?outputCurrency=0xEA6C0908734D7cADc10C01b2e4E9d8e1664EECc9&chainId=56" target="_blank" class="bg-white text-black px-4 py-2 rounded text-xs font-bold hover:bg-gray-200 transition-all uppercase tracking-wider flex items-center gap-2">
                    <span data-i18n="btn_buy">INITIALISER ACHAT</span>
                </a>
            </div>
        </div>
    </nav>

    <div id="tickerBar" class="fixed top-16 w-full z-40 bg-[#0a0a0c] border-b border-white/5 backdrop-blur-md overflow-hidden h-8 flex items-center">
        <div class="whitespace-nowrap animate-scroll-ticker flex gap-8 px-4 text-xs font-mono" id="ticker-track">
            <span class="text-gray-500">Connexion aux satellites financiers...</span>
        </div>
    </div>

    <main id="mainContent" class="relative pt-32 pb-20 px-4 md:px-6 max-w-[1400px] mx-auto space-y-6">

        <div id="dashboard" class="grid grid-cols-1 md:grid-cols-12 gap-4">
            
            <div class="md:col-span-12 lg:col-span-6 tech-card rounded-2xl p-6 relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition"><i data-lucide="orbit" class="w-32 h-32 text-brand"></i></div>
                <div class="relative z-10 h-full flex flex-col justify-between">
                    <div>
                        <div class="inline-flex items-center gap-2 px-2 py-1 rounded border border-green-500/30 bg-green-500/10 text-green-400 text-[10px] font-mono mb-4">
                            <span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span></span>
                            <span data-i18n="system_nominal">SYST√àMES NOMINAUX</span>
                        </div>
                        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2" data-i18n="hero_title">LUMA INDEX</h1>
                        <p class="text-sm text-gray-400 leading-relaxed max-w-lg" data-i18n="hero_desc">
                            L'interface de convergence entre la blockchain Almagest, l'innovation technologique et l'expansion vers Mars. 
                        </p>
                    </div>
                    <div class="mt-8 grid grid-cols-3 gap-4 border-t border-white/5 pt-4">
                        <div><div class="data-label" data-i18n="lbl_price">PRIX (USD)</div><div id="livePrice" class="data-value text-xl">Loading</div></div>
                        <div><div class="data-label" data-i18n="lbl_var">VAR 24H</div><div id="liveChange" class="data-value text-xl">--%</div></div>
                        <div><div class="data-label">MARKET CAP</div><div class="data-value text-xl text-gray-400">Micro</div></div>
                    </div>
                    <div class="mt-4 flex gap-3">
                        <button id="copyBtn" class="text-[10px] border border-white/20 px-3 py-1 rounded hover:bg-white/10 text-gray-300 transition flex items-center gap-2">
                            <i data-lucide="copy" class="w-3 h-3"></i> 0xEA...ECC9
                        </button>
                        <button id="addMetaMask" class="text-[10px] border border-[#f6851b]/30 px-3 py-1 rounded hover:bg-[#f6851b]/10 text-[#f6851b] transition flex items-center gap-2">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" class="w-3 h-3"> MetaMask
                        </button>
                    </div>
                </div>
            </div>

            <div class="md:col-span-6 lg:col-span-3 tech-card rounded-2xl p-6 flex flex-col justify-between relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-b from-blue-500/5 to-transparent pointer-events-none"></div>
                <div>
                    <div class="flex justify-between items-start mb-2">
                        <div class="data-label" data-i18n="lbl_env">ENVIRONNEMENT LOCAL</div>
                        <i id="weather-icon" data-lucide="scan" class="w-4 h-4 text-gray-500"></i>
                    </div>
                    <div id="wxLabel" class="text-3xl font-mono font-bold text-white">--¬∞C</div>
                    <div id="geoStatus" class="text-[10px] text-gray-500 font-mono mt-1" data-i18n="geo_wait">En attente GPS...</div>
                </div>
                <div class="mt-4 pt-4 border-t border-white/5">
                    <div class="data-label mb-1" data-i18n="lbl_iss_dist">DISTANCE ISS (RELATIVE)</div>
                    <div id="issDistance" class="text-xl font-mono text-accent">-- km</div>
                    <div class="text-[10px] text-gray-500" data-i18n="lbl_iss_sub">Bas√© sur votre position r√©elle</div>
                </div>
            </div>

            <div class="md:col-span-6 lg:col-span-3 tech-card rounded-2xl p-6 relative">
                <div class="data-label mb-4" data-i18n="lbl_clock">HORLOGE COSMIQUE</div>
                <div class="space-y-4">
                    <div class="flex justify-between items-center border-b border-white/5 pb-2">
                        <span class="text-xs text-gray-400" data-i18n="lbl_earth">TERRE (UTC)</span>
                        <span id="earth-clock" class="font-mono text-white text-right">--:--:--</span>
                    </div>
                    <div class="flex justify-between items-center border-b border-white/5 pb-2">
                        <span class="text-xs text-brand" data-i18n="lbl_mars">MARS (SOL)</span>
                        <span id="mars-clock" class="font-mono text-brand text-right">--:--</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-400" data-i18n="lbl_moon">PHASE LUNE</span>
                        <span id="moon-phase" class="font-mono text-white text-right">--</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="science-section" class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            
            <div class="tech-card rounded-2xl p-6 relative overflow-hidden">
                <div class="absolute -right-6 -top-6 w-32 h-32 bg-webb/10 rounded-full blur-3xl"></div>
                <div class="flex justify-between items-center mb-6">
                    <div class="flex items-center gap-3">
                        <i data-lucide="aperture" class="text-webb"></i>
                        <h3 class="font-bold text-lg text-white">JAMES WEBB (JWST)</h3>
                    </div>
                    <span class="text-[10px] text-webb border border-webb/30 px-2 py-1 rounded bg-webb/5">LAGRANGE L2</span>
                </div>

                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="bg-white/5 p-3 rounded">
                        <div class="data-label">MIRROR TEMP (MIRI)</div>
                        <div class="data-value text-blue-200">-266.15 ¬∞C</div>
                    </div>
                    <div class="bg-white/5 p-3 rounded">
                        <div class="data-label">DISTANCE TERRE</div>
                        <div class="data-value text-webb">1,500,000 km</div>
                    </div>
                </div>

                <div>
                    <div class="data-label mb-2" data-i18n="lbl_webb_disco">DERNI√àRES D√âCOUVERTES (API)</div>
                    <div id="webbNews" class="space-y-3 text-sm text-gray-300 min-h-[80px]">
                        Loading Deep Space Network...
                    </div>
                </div>
            </div>

            <div class="tech-card rounded-2xl p-6 flex flex-col justify-between">
                <div class="mb-6">
                    <div class="flex items-center gap-3 mb-4">
                        <i data-lucide="cpu" class="text-quantum"></i>
                        <h3 class="font-bold text-lg text-white" data-i18n="title_quantum">QUANTUM COMPUTER</h3>
                    </div>
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full border-2 border-quantum/30 flex items-center justify-center animate-spin-slow">
                            <div class="w-2 h-2 bg-quantum rounded-full"></div>
                        </div>
                        <div>
                            <div class="data-label">QUBIT COHERENCE</div>
                            <div class="text-sm text-white">99.8% (Simulated Stable)</div>
                            <div class="text-[10px] text-gray-500">Google Sycamore / IBM Osprey</div>
                        </div>
                    </div>
                </div>

                <div class="border-t border-white/5 pt-4">
                    <div class="flex items-center gap-2 mb-2">
                        <i data-lucide="disc" class="text-gray-400"></i>
                        <span class="text-xs font-bold text-white">STELLAR CARTOGRAPHY</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-400">NEAREST BLACK HOLE (Gaia BH1)</span>
                        <div class="text-right">
                            <div class="font-mono text-white text-sm">1,560 LY</div>
                            <div class="font-mono text-[10px] text-gray-500" id="bh-km">Calcul...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="iss-section" class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            
            <div class="tech-card rounded-2xl p-6 relative overflow-hidden">
                <div class="flex items-center gap-3 mb-6">
                    <i data-lucide="satellite" class="text-blue-400"></i>
                    <h3 class="font-bold text-lg text-white" data-i18n="voyager_title">VOYAGER LIVE TRACKING</h3>
                    <span class="text-[10px] border border-blue-500/30 text-blue-400 px-2 rounded bg-blue-500/10" data-i18n="interstellar">INTERSTELLAIRE</span>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between items-end mb-1">
                            <span class="text-sm font-bold text-white">VOYAGER 1</span>
                            <span class="text-[10px] text-gray-500">LAUNCH: 1977</span>
                        </div>
                        <div class="data-label" data-i18n="dist_earth">DISTANCE TERRE</div>
                        <div id="v1-dist" class="text-2xl font-mono text-blue-200">Calcul...</div>
                        <div class="w-full bg-gray-800 h-1 rounded-full mt-2 overflow-hidden">
                            <div class="bg-blue-500 h-full w-[99%] animate-pulse"></div>
                        </div>
                    </div>
                    
                    <div>
                        <div class="flex justify-between items-end mb-1">
                            <span class="text-sm font-bold text-white">VOYAGER 2</span>
                            <span class="text-[10px] text-gray-500" data-i18n="heliopause">HELIOPAUSE FRANCHIE</span>
                        </div>
                        <div class="data-label" data-i18n="dist_earth">DISTANCE TERRE</div>
                        <div id="v2-dist" class="text-xl font-mono text-gray-300">Calcul...</div>
                    </div>
                </div>
            </div>

            <div class="tech-card rounded-2xl p-6 relative flex flex-col">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-lg flex items-center gap-2 text-white"><i data-lucide="globe" class="text-green-400"></i> <span data-i18n="iss_title">ISS ORBITAL DATA</span></h3>
                    <div class="flex items-center gap-2">
                         <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                         <span class="text-[10px] font-mono text-red-400">LIVE API</span>
                    </div>
                </div>
                
                <div class="flex-1 bg-[#0a0a0c] rounded-lg border border-white/5 relative overflow-hidden flex items-center justify-center min-h-[200px] group">
                    <div class="absolute inset-0 opacity-30 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-blue-900/40 via-[#050505] to-[#050505]"></div>
                    <div class="grid-bg absolute inset-0 opacity-50"></div>
                    
                    <div class="text-center z-10 space-y-4">
                        <div class="data-label" data-i18n="iss_coords">COORDONN√âES ORBITALES</div>
                        <div class="font-mono text-3xl text-white tracking-tighter">
                            <span id="iss-lat">LAT --.--</span><br>
                            <span id="iss-lon" class="text-gray-400">LON --.--</span>
                        </div>
                        <div class="text-xs text-green-400 font-mono border border-green-500/20 bg-green-500/10 px-3 py-1 rounded-full inline-block">
                            VITESSE: ~27,600 km/h
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="news-section" class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            
            <div class="lg:col-span-2 tech-card rounded-2xl p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-lg text-white" data-i18n="news_title">FLUX D'INFORMATION</h3>
                    <div class="flex gap-2 text-[10px] font-mono">
                        <span class="text-brand">CRYPTO</span>
                        <span class="text-blue-400">SPACE</span>
                        <span class="text-quantum">TECH</span>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="text-xs font-bold text-blue-400 mb-3 border-b border-white/10 pb-2">SPACEFLIGHT NEWS</h4>
                        <div id="spaceNews" class="space-y-3">Loading...</div>
                    </div>
                    <div>
                        <h4 class="text-xs font-bold text-brand mb-3 border-b border-white/10 pb-2">CRYPTO INTELLIGENCE</h4>
                        <div id="cryptoNews" class="space-y-3">Loading...</div>
                    </div>
                </div>
            </div>

            <div class="tech-card rounded-2xl p-6">
                <h3 class="font-bold text-lg mb-6 text-white" data-i18n="missions_active">MISSIONS ACTIVES</h3>
                <div class="space-y-4">
                    <div class="p-3 bg-white/5 rounded border-l-2 border-brand">
                        <div class="flex justify-between text-[10px] text-gray-400 mb-1">
                            <span>LUMA PROTOCOL</span>
                            <span class="text-brand">LIVE</span>
                        </div>
                        <div class="text-sm font-bold text-white">PHASE 2: CONSTRUCTION</div>
                        <div class="text-xs text-gray-500 mt-1" data-i18n="mission_luma">Expansion communaut√© & utilit√©.</div>
                    </div>
                    <div class="p-3 bg-white/5 rounded border-l-2 border-green-500">
                        <div class="flex justify-between text-[10px] text-gray-400 mb-1">
                            <span>ARTEMIS II</span>
                            <span class="text-green-400">PREP</span>
                        </div>
                        <div class="text-sm font-bold text-white">NASA / CNSA</div>
                        <div class="text-xs text-gray-500 mt-1" data-i18n="mission_artemis">Retour habit√© orbite lunaire.</div>
                    </div>
                    <div class="p-3 bg-white/5 rounded border-l-2 border-blue-500">
                        <div class="flex justify-between text-[10px] text-gray-400 mb-1">
                            <span>STARSHIP</span>
                            <span class="text-blue-400">TEST</span>
                        </div>
                        <div class="text-sm font-bold text-white">SPACEX</div>
                        <div class="text-xs text-gray-500 mt-1" data-i18n="mission_starship">D√©veloppement lanceur lourd Mars.</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="manifesto" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-20">
            <div class="tech-card rounded-2xl p-8">
                <h2 class="text-2xl font-bold mb-4 text-brand" data-i18n="manifesto_title">VISION & MANIFESTE</h2>
                <p class="text-gray-400 text-sm leading-relaxed mb-4" data-i18n="manifesto_p1">
                    LUMA n'est pas seulement un actif num√©rique. C'est un indice symbolique de la progression humaine. 
                    Nous construisons le pont financier et culturel entre la Terre, la Lune et Mars.
                </p>
                <p class="text-gray-400 text-sm leading-relaxed" data-i18n="manifesto_p2">
                    Dans une √©conomie multi-plan√©taire, la d√©centralisation n'est pas une option, c'est une n√©cessit√© physique. 
                    LUMA pr√©pare ce terrain √† travers l'√©ducation, la communaut√© et la technologie Almagest.
                </p>
            </div>
            
            <div class="tech-card rounded-2xl p-8">
                <h2 class="text-2xl font-bold mb-4 text-white" data-i18n="timeline_title">TIMELINE FUTURISTE</h2>
                <div class="border-l border-white/10 ml-2 space-y-6">
                    <div class="pl-6 relative">
                        <span class="absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-green-500"></span>
                        <div class="text-xs text-green-400 font-mono mb-1">Q1 2026</div>
                        <div class="font-bold text-sm text-white" data-i18n="time_1">Lancement Infrastructure Almagest</div>
                    </div>
                    <div class="pl-6 relative">
                        <span class="absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-white/20"></span>
                        <div class="text-xs text-gray-500 font-mono mb-1">2027</div>
                        <div class="font-bold text-sm text-gray-300" data-i18n="time_2">Int√©gration Flux Donn√©es Satellitaires</div>
                    </div>
                    <div class="pl-6 relative">
                        <span class="absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-brand/50"></span>
                        <div class="text-xs text-gray-500 font-mono mb-1">2030+</div>
                        <div class="font-bold text-sm text-gray-300" data-i18n="time_3">Premi√®re Tx LUMA Terre-Mars</div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <div class="fixed bottom-6 right-6 z-40">
        <button onclick="toggleExplorerMode()" class="bg-white text-black px-6 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition-transform flex items-center gap-2">
            <i data-lucide="telescope" class="w-4 h-4"></i> <span data-i18n="btn_explore">MODE EXPLORATEUR</span>
        </button>
    </div>

    <footer class="border-t border-white/5 bg-[#020202] py-12">
        <div class="max-w-[1400px] mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-8 text-xs text-gray-500">
            <div class="col-span-1 md:col-span-2">
                <img src="Luma-logo.png" class="w-8 h-8 rounded mb-4 shadow-md">
                <p data-i18n="footer_desc">Donn√©es temps r√©el via API publiques. LUMA est un token BEP-20.</p>
                <p class="mt-2">&copy; 2026 Lunar&Mars Project.</p>
            </div>
            <div>
                <h4 class="text-white font-bold mb-3" data-i18n="footer_archives">ARCHIVES HISTORIQUES</h4>
                <ul class="space-y-2">
                    <li><a href="#" class="hover:text-brand">Programme Apollo</a></li>
                    <li><a href="#" class="hover:text-brand">Mars Pathfinder</a></li>
                    <li><a href="#" class="hover:text-brand">Sondes Voyager</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-white font-bold mb-3" data-i18n="footer_data">DONN√âES</h4>
                <ul class="space-y-2">
                    <li><a href="LUMA_Whitepaper_v1.1.pdf" target="_blank" class="hover:text-brand">Whitepaper V1.1</a></li>
                    <li><a href="#" id="copyContract" class="hover:text-brand">Copier Contrat</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <script>
        lucide.createIcons();
        const CONTRACT_ADDRESS = '0xEA6C0908734D7cADc10C01b2e4E9d8e1664EECc9';
        const $ = (id) => document.getElementById(id);

        // --- 0. TRADUCTION ---
        const translations = {
            fr: {
                nav_dash: "DASHBOARD",
                nav_science: "SCIENCE & WEBB",
                nav_iss: "TRACKING",
                nav_intel: "FLUX INTEL",
                nav_manifesto: "MANIFESTO",
                btn_buy: "INITIALISER ACHAT",
                system_nominal: "SYST√àMES NOMINAUX",
                hero_title: "LUMA INDEX",
                hero_desc: "L'interface de convergence entre la blockchain Almagest, l'innovation technologique et l'expansion vers Mars.",
                lbl_price: "PRIX (USD)",
                lbl_var: "VAR 24H",
                lbl_env: "ENVIRONNEMENT LOCAL",
                geo_wait: "En attente GPS...",
                lbl_iss_dist: "DISTANCE ISS (RELATIVE)",
                lbl_iss_sub: "Bas√© sur votre position r√©elle",
                lbl_clock: "HORLOGE COSMIQUE",
                lbl_earth: "TERRE (UTC)",
                lbl_mars: "MARS (SOL)",
                lbl_moon: "PHASE LUNE",
                lbl_webb_disco: "DERNI√àRES D√âCOUVERTES (API)",
                title_quantum: "ORDINATEUR QUANTIQUE",
                voyager_title: "VOYAGER LIVE TRACKING",
                interstellar: "INTERSTELLAIRE",
                dist_earth: "DISTANCE TERRE",
                heliopause: "HELIOPAUSE FRANCHIE",
                iss_title: "ISS ORBITAL DATA",
                iss_coords: "COORDONN√âES ORBITALES",
                news_title: "FLUX D'INFORMATION",
                missions_active: "MISSIONS ACTIVES",
                mission_luma: "Expansion communaut√© & utilit√©.",
                mission_artemis: "Retour habit√© orbite lunaire.",
                mission_starship: "D√©veloppement lanceur lourd Mars.",
                manifesto_title: "VISION & MANIFESTE",
                manifesto_p1: "LUMA n'est pas seulement un actif num√©rique. C'est un indice symbolique de la progression humaine.",
                manifesto_p2: "Dans une √©conomie multi-plan√©taire, la d√©centralisation n'est pas une option, c'est une n√©cessit√© physique.",
                timeline_title: "TIMELINE FUTURISTE",
                time_1: "Lancement Infrastructure Almagest",
                time_2: "Int√©gration Flux Donn√©es Satellitaires",
                time_3: "Premi√®re Tx LUMA Terre-Mars",
                btn_explore: "MODE EXPLORATEUR",
                footer_desc: "Donn√©es temps r√©el via API publiques.",
                footer_archives: "ARCHIVES",
                footer_data: "DONN√âES"
            },
            en: {
                nav_dash: "DASHBOARD",
                nav_science: "SCIENCE & WEBB",
                nav_iss: "TRACKING",
                nav_intel: "INTEL FEED",
                nav_manifesto: "MANIFESTO",
                btn_buy: "INITIALIZE BUY",
                system_nominal: "SYSTEMS NOMINAL",
                hero_title: "LUMA INDEX",
                hero_desc: "The convergence interface between Almagest blockchain, technological innovation, and expansion to Mars.",
                lbl_price: "PRICE (USD)",
                lbl_var: "24H CHANGE",
                lbl_env: "LOCAL ENVIRONMENT",
                geo_wait: "Waiting for GPS...",
                lbl_iss_dist: "ISS DISTANCE (RELATIVE)",
                lbl_iss_sub: "Based on your real location",
                lbl_clock: "COSMIC CLOCK",
                lbl_earth: "EARTH (UTC)",
                lbl_mars: "MARS (SOL)",
                lbl_moon: "MOON PHASE",
                lbl_webb_disco: "LATEST DISCOVERIES (API)",
                title_quantum: "QUANTUM COMPUTER",
                voyager_title: "VOYAGER LIVE TRACKING",
                interstellar: "INTERSTELLAR",
                dist_earth: "DISTANCE FROM EARTH",
                heliopause: "HELIOPAUSE CROSSED",
                iss_title: "ISS ORBITAL DATA",
                iss_coords: "ORBITAL COORDINATES",
                news_title: "INTELLIGENCE FEED",
                missions_active: "ACTIVE MISSIONS",
                mission_luma: "Community expansion & utility.",
                mission_artemis: "Manned return to lunar orbit.",
                mission_starship: "Heavy Mars launcher development.",
                manifesto_title: "VISION & MANIFESTO",
                manifesto_p1: "LUMA is not just a digital asset. It is a symbolic index of human progression.",
                manifesto_p2: "In a multi-planetary economy, decentralization is not an option, it is a physical necessity.",
                timeline_title: "FUTURIST TIMELINE",
                time_1: "Almagest Infrastructure Launch",
                time_2: "Satellite Data Feed Integration",
                time_3: "First LUMA Tx Earth-Mars",
                btn_explore: "EXPLORER MODE",
                footer_desc: "Real-time data via public APIs.",
                footer_archives: "ARCHIVES",
                footer_data: "DATA"
            }
        };

        let currentLang = localStorage.getItem('luma-lang') || 'fr';
        function changeLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('luma-lang', lang);
            document.getElementById('btn-fr').classList.toggle('active', lang === 'fr');
            document.getElementById('btn-en').classList.toggle('active', lang === 'en');
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) el.innerText = translations[lang][key];
            });
            setFestivalBar();
        }
        changeLanguage(currentLang);

        // --- 1. BANDEAU F√äTES ---
        function setFestivalBar() {
            const now = new Date();
            const month = now.getMonth();
            const day = now.getDate();
            const bar = $("festival-bar");
            const txt = $("festival-text");
            const nav = $("mainNav");
            const ticker = $("tickerBar");
            const main = $("mainContent");
            let message = "", show = false;

            if (month === 0 && day <= 15) {
                message = currentLang === 'fr' ? "‚ú® BONNE ANN√âE 2026 !" : "‚ú® HAPPY NEW YEAR 2026!";
                show = true;
            } else if (month === 11 && day >= 20) {
                message = currentLang === 'fr' ? "üéÑ AIRDROP DE NO√ãL !" : "üéÑ CHRISTMAS AIRDROP!";
                show = true;
            }

            if (show) {
                txt.textContent = message;
                bar.classList.remove("hidden");
                nav.style.top = "32px";
                ticker.style.top = "96px";
                main.style.paddingTop = "12rem";
            } else {
                bar.classList.add("hidden");
                nav.style.top = "0px";
                ticker.style.top = "64px";
                main.style.paddingTop = "10rem";
            }
        }

        // --- 2. M√âT√âO ---
        let stopParticles = null;
        function clearWeatherOverlay() { $("weather-overlay").innerHTML = ""; }
        function spawnParticles(char, rateMs) {
            const w = $("weather-overlay");
            const timer = setInterval(() => {
                const p = document.createElement("div");
                p.className = "absolute top-[-20px] text-white/60 pointer-events-none";
                p.textContent = char;
                p.style.left = Math.random() * 100 + "vw";
                p.style.fontSize = (10 + Math.random() * 14) + "px";
                p.style.opacity = (0.3 + Math.random() * 0.5).toString();
                const dur = 4 + Math.random() * 4;
                p.style.transition = `transform ${dur}s linear, opacity ${dur}s linear`;
                w.appendChild(p);
                requestAnimationFrame(() => {
                    p.style.transform = `translateY(110vh) translateX(${(-20 + Math.random()*40)}px)`;
                    p.style.opacity = "0";
                });
                setTimeout(() => p.remove(), dur * 1000);
            }, rateMs);
            return () => clearInterval(timer);
        }
        function applyWeatherEffect(mode) {
            clearWeatherOverlay();
            if (stopParticles) stopParticles();
            if (mode === "snow") stopParticles = spawnParticles("‚ùÑ", 200);
            else if (mode === "rain") stopParticles = spawnParticles("üíß", 80);
            else if (mode === "storm") stopParticles = spawnParticles("‚ö°", 300);
        }

        // --- 3. APIs ---
        function haversineKm(lat1, lon1, lat2, lon2) {
            const R = 6371; 
            const toRad = x => x * Math.PI / 180;
            const dLat = toRad(lat2 - lat1);
            const dLon = toRad(lon2 - lon1);
            return 2 * R * Math.asin(Math.sqrt(Math.sin(dLat/2)**2 + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon/2)**2));
        }

        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                $("geoStatus").innerText = `${lat.toFixed(2)}, ${lon.toFixed(2)}`;

                try {
                    const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                    const data = await res.json();
                    const code = data.current_weather.weathercode;
                    $("wxLabel").innerText = `${data.current_weather.temperature}¬∞C`;
                    let mode = "clear";
                    if ((code >= 51 && code <= 67) || (code >= 80 && code <= 82)) mode = "rain";
                    if (code >= 71 && code <= 77) mode = "snow";
                    if (code >= 95) mode = "storm";
                    applyWeatherEffect(mode);
                } catch(e) {}

                setInterval(async () => {
                    try {
                        const r = await fetch("https://api.wheretheiss.at/v1/satellites/25544");
                        const j = await r.json();
                        $("iss-lat").innerText = `LAT ${j.latitude.toFixed(2)}`;
                        $("iss-lon").innerText = `LON ${j.longitude.toFixed(2)}`;
                        const dist = haversineKm(lat, lon, j.latitude, j.longitude);
                        $("issDistance").innerText = `${Math.round(dist).toLocaleString()} km`;
                    } catch(e){}
                }, 5000);
            }, () => { $("geoStatus").innerText = "GPS OFF"; });
        }

        // --- 4. NEWS & WEBB ---
        async function fetchSpaceNews() {
            try {
                // News Generales
                const r = await fetch("https://api.spaceflightnewsapi.net/v4/articles/?limit=3");
                const j = await r.json();
                $("spaceNews").innerHTML = j.results.map(a => `<div class="border-b border-white/5 pb-2 mb-2"><a href="${a.url}" target="_blank" class="text-xs text-blue-300 hover:text-white transition block truncate">${a.title}</a></div>`).join('');
                
                // James Webb Specific (Filtrage)
                const rWebb = await fetch("https://api.spaceflightnewsapi.net/v4/articles/?search=Webb&limit=2");
                const jWebb = await rWebb.json();
                $("webbNews").innerHTML = jWebb.results.length > 0 ? jWebb.results.map(a => `<div class="border-b border-white/5 pb-2 mb-2"><a href="${a.url}" target="_blank" class="text-xs text-webb hover:text-white transition block">${a.title}</a></div>`).join('') : "Aucune nouvelle r√©cente.";
            } catch(e) {}
        }
        
        async function fetchCryptoNews() {
            try {
                const r = await fetch("https://min-api.cryptocompare.com/data/v2/news/?lang=EN");
                const j = await r.json();
                $("cryptoNews").innerHTML = j.Data.slice(0, 3).map(n => `<div class="border-b border-white/5 pb-2 mb-2"><a href="${n.url}" target="_blank" class="text-xs text-brand hover:text-white transition block truncate">${n.title}</a></div>`).join('');
            } catch(e) {}
        }
        fetchSpaceNews();
        fetchCryptoNews();

        // --- 5. VOYAGER & BLACK HOLE ---
        function updateSpaceData() {
            const startTimestamp = 1704067200000;
            const now = Date.now();
            const elapsed = (now - startTimestamp) / 1000;
            $("v1-dist").innerText = Math.floor(24400000000 + (elapsed * 17)).toLocaleString() + " km";
            $("v2-dist").innerText = Math.floor(20300000000 + (elapsed * 15)).toLocaleString() + " km";
            
            // Black Hole (Gaia BH1 ~ 1560 LY)
            // 1 LY = 9.461e12 km
            $("bh-km").innerText = (1560 * 9.461e12).toExponential(3) + " KM";
        }
        setInterval(updateSpaceData, 1000);

        // --- 6. HORLOGES & TICKER ---
        function updateClocks() {
            const now = new Date();
            $("earth-clock").innerText = now.toISOString().split('T')[1].split('.')[0] + " UTC";
            const millisPerSol = 88775244;
            const msPassed = now.getTime() - 947116800000;
            const sols = msPassed / millisPerSol;
            const solDay = Math.floor(sols) + 44796;
            const solTime = (sols % 1) * 24;
            const h = Math.floor(solTime);
            const m = Math.floor((solTime - h) * 60);
            $("mars-clock").innerText = `Sol ${solDay} ${h}:${m < 10 ? '0'+m : m}`;
        }
        setInterval(updateClocks, 1000);

        // Crypto Ticker & Price
        const barCoins = [{id:"bitcoin", sym:"BTC"}, {id:"binancecoin", sym:"BNB"}, {id:"solana", sym:"SOL"}];
        async function fetchMarket() {
            try {
                const rLuma = await fetch("https://api.geckoterminal.com/api/v2/networks/bsc/pools/0xc4ce7c692fdd27603437199c9b40baf5e2b804e6");
                const dLuma = await rLuma.json();
                const attr = dLuma.data.attributes;
                const p = parseFloat(attr.base_token_price_usd);
                const c = parseFloat(attr.price_change_percentage.h24);
                
                $("livePrice").innerText = p < 0.01 ? '$'+p.toFixed(8) : '$'+p.toFixed(4);
                const cEl = $("liveChange");
                cEl.innerText = (c>=0?'+':'') + c.toFixed(2) + '%';
                cEl.className = `data-value text-xl ${c>=0?'text-green-400':'text-red-400'}`;

                const ids = barCoins.map(x=>x.id).join(',');
                const rCoins = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true`);
                const dCoins = await rCoins.json();
                
                let html = `<span class="font-bold text-brand">LUMA $${p.toFixed(8)}</span> <span class="mx-4 text-gray-600">|</span> `;
                barCoins.forEach(coin => {
                    const data = dCoins[coin.id];
                    if(data) html += `<span class="text-gray-300">${coin.sym} $${data.usd} <span class="${data.usd_24h_change>=0?'text-green-500':'text-red-500'}">(${data.usd_24h_change.toFixed(1)}%)</span></span> <span class="mx-4 text-gray-600">|</span> `;
                });
                $("ticker-track").innerHTML = html + html; 
            } catch(e){}
        }
        fetchMarket();
        setInterval(fetchMarket, 60000);

        // --- 7. UTILS ---
        $("copyBtn").addEventListener('click', () => { navigator.clipboard.writeText(CONTRACT_ADDRESS); alert("Adresse copi√©e !"); });
        $("addMetaMask").addEventListener('click', async () => {
            if (window.ethereum) {
                try { await window.ethereum.request({ method: 'wallet_watchAsset', params: { type: 'ERC20', options: { address: CONTRACT_ADDRESS, symbol: 'LUMA', decimals: 18, image: window.location.origin + '/Luma-logo.png' }}}); } catch (e) {}
            } else alert("MetaMask introuvable");
        });
        function toggleExplorerMode() { alert("Mode Explorateur (3D) en cours de d√©veloppement pour la V2."); }
        function openGamePopup() { window.open('game/luma-game.html', 'LUMA_ARCADE', 'width=500,height=750,resizable=yes,scrollbars=no'); }
    </script>
</body>
</html>
